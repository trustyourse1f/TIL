<!-- TOC -->

- [8. NumPy 어레이 형태 다루기](#8-numpy-어레이-형태-다루기)
  - [어레이 형태 바꾸기](#어레이-형태-바꾸기)
    - [ndarray.shape](#ndarrayshape)
    - [ndarray.ravel()](#ndarrayravel)
    - [ndarray.reshape()](#ndarrayreshape)
    - [ndarray.T](#ndarrayt)
  - [어레이 합치기](#어레이-합치기)
    - [numpy.vstack()](#numpyvstack)
    - [numpy.hstack()](#numpyhstack)
    - [numpy.column\_stack()](#numpycolumn_stack)
  - [어레이 쪼개기](#어레이-쪼개기)
    - [동일한 형태로 나누기](#동일한-형태로-나누기)
    - [나눌 열(column) 지정하기](#나눌-열column-지정하기)

<!-- /TOC -->

# 8. NumPy 어레이 형태 다루기
NumPy 어레이의 형태를 다루는 방법(shape manipulation)에 대해 알아본다.

우선 어레이의 형태를 확인하고(`shape`), 변경하고(`reshape()`), 행과 열을 바꾸는(`T`) 방법에 대해 알아본다.

그리고 `vstack()`, `hstack()`, `column_stack()`을 이용해서 어레이를 합치는 방법,

`hsplit()`을 이용해서 어레이를 쪼개는 방법에 대해서도 알아본다.

</br></br>

## 어레이 형태 바꾸기
어레이는 각 축에 대한 요소의 개수로 주어지는 형태(shape)를 가진다.

### ndarray.shape
어레이의 형태를 반환한다.
```python
import numpy as np

a = np.floor(10*np.random.random((3, 4)))

print(a)
print(a.shape)
```
```
[[5. 7. 6. 5.]
 [4. 6. 4. 8.]
 [9. 3. 7. 5.]]
(3, 4)
```
어레이 a의 형태는 (3, 4)이다.

</br></br>

어레이의 형태는 다양한 명령을 통해 바꿀 수 있다.

다음의 세가지 명령은 수정된 어레이를 반환하지만 원래 어레이는 변경하지 않는다.


### ndarray.ravel()
`ravel()`은 (1차원으로) 펼쳐진 어레이를 반환한다.
```python
import numpy as np

a = np.floor(10*np.random.random((3, 4)))

print(a.ravel())
```
```python
[5. 7. 6. 5. 4. 6. 4. 8. 9. 3. 7. 5.]
```

</br></br>

### ndarray.reshape()
새로운 형태를 갖는 어레이를 반환한다.
```python
import numpy as np

a = np.floor(10*np.random.random((3, 4)))

print(a.reshape(6, 2))
```
```python
[[5. 7.]
 [6. 5.]
 [4. 6.]
 [4. 8.]
 [9. 3.]
 [7. 5.]]
 ```

 </br></br>

### ndarray.T
행과 열을 바꾼 전치행렬 어레이(transposed array)를 반환한다.
```python
import numpy as np

a = np.floor(10*np.random.random((3, 4)))

print(a.T)
```
```python
[[5. 4. 9.]
 [7. 6. 3.]
 [6. 4. 7.]
 [5. 8. 5.]]
 ```

 ## 어레이 합치기
 여러 어레이를 하나의 어레이로 합칠 수 있는 `vstack()`, `hstack()`, `column_stack()` 의 사용법에 대해 알아본다.

### numpy.vstack()
`vstack()`은 어레이를 수직 방향으로(행을 따라서) 합친다.
```python
import numpy as np

a = np.floor(10*np.random.random((2, 2)))
b = np.floor(10*np.random.random((2, 2)))

print(a)
print(b)
print(np.vstack((a, b)))
```
```python
[[5. 7.]
 [6. 5.]]

[[4. 6.]
 [4. 8.]]

[[5. 7.]
 [6. 5.]
 [4. 6.]
 [4. 8.]]
 ```

</br></br>

### numpy.hstack()
`hstack()`은 어레이를 수평 방향으로(열을 따라서) 합친다.
```python
import numpy as np

a = np.floor(10*np.random.random((2, 2)))
b = np.floor(10*np.random.random((2, 2)))

print(a)
print(b)
print(np.hstack((a, b)))
```
```python
[[5. 7.]
 [6. 5.]]

[[4. 6.]
 [4. 8.]]

[[5. 7. 4. 6.]
 [6. 5. 4. 8.]]
```

</br></br>

### numpy.column_stack()
`column_stack()`은 1차원 어레이를 열 방향으로 세워서 2차원 어레이로 만든다.
```python
import numpy as np

np.random.seed(0)

a = np.floor(10*np.random.random((2, 2)))
b = np.floor(10*np.random.random((2, 2)))

print(np.hstack((a, b)))
print(np.column_stack((a, b)))
```
```python
[[5. 7. 4. 6.]
 [6. 5. 4. 8.]]

[[5. 7. 4. 6.]
 [6. 5. 4. 8.]]
```
2차원 어레이에 대해서는 `hstack()`과 기능이 동일하다.

</br></br>

```python
a = np.array([4, 2])
b = np.array([2, 8])

print(np.hstack((a, b)))
print(np.column_stack((a, b)))
```
```python
[4 2 2 8]
[[4 2]
 [2 8]]
 ```
 하지만 1차원 어레이에 대해서 `hstack()`과 `column_stack()`은 다른 결과를 반환한다.

</br></br>

## 어레이 쪼개기
`hsplit()`을 이용해서 수평 방향으로 어레이를 쪼갤 수 있다.

동일한 형태로 나눠질 어레이의 개수를 지정하거나, 어떤 열(column)에서 나눌지를 지정할 수 있다.
### 동일한 형태로 나누기
```python
import numpy as np

a = np.floor(10*np.random.random((2, 12)))

print(a)
print(np.hsplit(a, 3))
```
```python
[[5. 7. 6. 5. 4. 6. 4. 8. 9. 3. 7. 5.]
 [5. 9. 0. 0. 0. 8. 7. 8. 9. 7. 4. 7.]]

[array([[5., 7., 6., 5.],
       [5., 9., 0., 0.]]), array([[4., 6., 4., 8.],
       [0., 8., 7., 8.]]), array([[9., 3., 7., 5.],
       [9., 7., 4., 7.]])]
```
`np.hsplit(a, 3)`은 어레이 a를 3개의 동일한 형태의 어레이로 나눈 어레이를 반환한다.

</br></br>

### 나눌 열(column) 지정하기
```python
import numpy as np

a = np.floor(10*np.random.random((2, 12)))

print(a)
print(np.hsplit(a, (3, 4)))
```
```python
[[5. 7. 6. 5. 4. 6. 4. 8. 9. 3. 7. 5.]
 [5. 9. 0. 0. 0. 8. 7. 8. 9. 7. 4. 7.]]

[array([[5., 7., 6.],
       [5., 9., 0.]]), array([[5.],
       [0.]]), array([[4., 6., 4., 8., 9., 3., 7., 5.],
       [0., 8., 7., 8., 9., 7., 4., 7.]])]
```
`np.hsplit(a, (3, 4))`은 어레이 a를 세번째 열 이후, 그리고 네번째 열 이후에서 쪼갠 세개의 어레이를 갖는 어레이를 반환한다.